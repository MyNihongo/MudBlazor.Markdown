@using MudBlazor.Markdown.Core.Services
@inherits LayoutComponentBase

<MudLayout>
	<MudAppBar Fixed="true" Elevation="5">
		<MudText Typo="Typo.h4">Server sample</MudText>
		<MudSpacer />
		<MudTooltip Text="Toggle theme">
			<MudIconButton Icon="@Icons.Material.Rounded.Brightness4" Color="Color.Inherit" OnClick="@ToggleThemeAsync" />
		</MudTooltip>
	</MudAppBar>
	
	<MudDrawer @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="2">
		<MarkdownNavMenu />
	</MudDrawer>

	<MudMainContent>
		<MudContainer Class="pt-2 pb-5">
			@Body
		</MudContainer>
	</MudMainContent>
</MudLayout>

@code
{
	private bool _drawerOpen = true;

	[Inject]
	private IThemeService? ThemeService { get; init; }

	private async Task ToggleThemeAsync()
	{
		if (ThemeService == null)
			return;

		await ThemeService.ToggleThemeAsync()
			.ConfigureAwait(false);
	}
}
